<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Benny Istanto">
<meta name="dcterms.date" content="2014-12-16">
<meta name="description" content="OpenStreetMap (OSM) is a collaborative project to create a free, editable map of the world">

<title>OSM use case: accessibility mapping</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/image-logo/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-4d9afe2b8d18ee9fa5d0d57b5ed4214d.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ae7d70a23c66c8df71f5a679a6f4dfc7.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-1bcb2280c51331a5c09e99b999b82845.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-ae7d70a23c66c8df71f5a679a6f4dfc7.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-371178116"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-371178116', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../styles/styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../assets/image-logo/bi-logo-full-light.png" alt="Benny Istanto Logo" class="navbar-logo light-content">
    <img src="../assets/image-logo/bi-logo-full-light.png" alt="Benny Istanto Logo" class="navbar-logo dark-content">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../csr.html"> 
<span class="menu-text">CSR</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-works" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Works</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-works">    
        <li>
    <a class="dropdown-item" href="../works.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../works/experiences.html">
 <span class="dropdown-text">Experiences</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../works/projects.html">
 <span class="dropdown-text">Projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../works/consulting.html">
 <span class="dropdown-text">Consulting</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../works/maps-and-infographics.html">
 <span class="dropdown-text">Maps &amp; Infographics</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">OSM use case: accessibility mapping</h1>
  <div class="quarto-categories">
    <div class="quarto-category">GIS</div>
    <div class="quarto-category">Research</div>
  </div>
  </div>

<div>
  <div class="description">
    OpenStreetMap (OSM) is a collaborative project to create a free, editable map of the world
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Benny Istanto </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 16, 2014</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>OpenStreetMap (<a href="https://www.openstreetmap.org/index.html">OSM</a>) is a collaborative project to create a free, editable map of the world. The core of OSM is a collection of map data which can be used for many different purposes. You can get a first idea browsing the world map on the main page of OSM. While browsing, try the Layers button on the right to view different map formats. It illustrates how OSM’s data can be used in diverse manners.</p>
<p>I will explain on how OSM data can be applied in the humanitarian context to support WFP’s program activities in the field.</p>
<section id="market-access-in-sumba-island-indonesia" class="level2">
<h2 class="anchored" data-anchor-id="market-access-in-sumba-island-indonesia">Market access in Sumba Island, Indonesia</h2>
<section id="definition-and-relevance-for-food-security" class="level4">
<h4 class="anchored" data-anchor-id="definition-and-relevance-for-food-security">DEFINITION AND RELEVANCE FOR FOOD SECURITY</h4>
<p>The term “accessibility” refers to the distance to a location of interest and ease with which each destination is reached (Goodall, 1987).</p>
<p>Accessibility in terms of ease of physical access to markets and social infrastructure has an impact in terms of food security and poverty of (rural) populations. Access to markets can contribute to the diversification of household economies by exposing them to channels for the sale of their labour or products. Well-functioning markets go a long way to insulate households from shocks to crop production such as those from droughts or floods. Good access to health and educational resources is an essential condition for development and the increasing in standards of living.</p>
<p>Hence the interest in the modelling and quantification of accessibility for institutions involved in humanitarian assistance is high. Maps of travel time to some target location (market, administrative capital) can flag isolated areas more prone to chronic poverty and food insecurity. From them you can derive the catchment area of target locations, i.e.&nbsp;areas where populations are closer to a given target than to any other: Catchment areas of markets can highlight the reach of particular markets or enable you to characterize the population served by a given market in terms of its wealth, food security or livelihood. You can also broadly characterize a country by mapping propotions of the population that are more than a certain travel time away from a given amenity (such as health centres, water points, education resources).</p>
<p>Beyond these operational applications, being able to model travel time and catchment area of markets (or health centres or any other location of interest) offers the possibility to integrate accessibility data into household surveys as additional explanatory variables.</p>
<p>This publication adapts an existing GIS model of accessibility, and implements it as a self study training guidebook to a study of market access in Sumba Island, East Nusa Tenggara, Indonesia. It covers the preparation of travel time and market catchment data layers. It also shows how to integrate these datasets into household survey databases and how to use the travel time for estimating the percentage of population having access to a market in a one day round trip.</p>
</section>
<section id="references" class="level4">
<h4 class="anchored" data-anchor-id="references">REFERENCES</h4>
<p>This accessibility model used in this training guidebook has been developed by Pozzi and Robinson in the scope of the FAO – IGAD Livestock Policy Initiative. The main reference to this exercise is:</p>
<p>Accessibility Mapping in the Horn of Africa: Applications for Livestock Policy, Francesca Pozzi and Tim Robinson, Dec 2008, which can be found here: <a href="https://cgspace.cgiar.org/handle/10568/24984" class="uri">https://cgspace.cgiar.org/handle/10568/24984</a></p>
<p>You can also see a practical application in the context of rural population access to health centres in Niger in:</p>
<p>Justine Blanford, Supriya Kumar, Wei Luo and Alan M MacEachren, “It’s a long, long walk: accessibility to hospitals, maternity and integrated health centers in Niger”, International Journal of Health Geographics, 2012, 11:24. <a href="http://www.ij-healthgeographics.com/content/11/1/24" class="uri">http://www.ij-healthgeographics.com/content/11/1/24</a></p>
</section>
<section id="the-modelling-approach" class="level4">
<h4 class="anchored" data-anchor-id="the-modelling-approach">THE MODELLING APPROACH</h4>
<p>Accessibility calculations are based on a quantification of time of travel. The approach is to obtain a gridded layer of time of travel – in short, each point in a regular grid has the value of the time it takes to travel to the nearest (pre-defined) target location. Target locations in this exercise are markets, but it could be any point of interest, form settlements with more than a given number of inhabitants, to provincial capitals, to health centres, banks, etc. Once you have this time of travel output, you can derive catchment areas or quantify population living more than a given travel time away from the target locations.</p>
<p>Rather than deriving time of travel from a plain geographic (or Euclidean) distance and assuming a fixed travel speed, the method described here allows you to account for the different speeds of travel that various surfaces allow (mountain forest versus flat open ground, a highway versus single track) as well as any barriers that you might encounter (national borders, rivers, mountains) and derive the time it would take to travel along the most economical path. Economical here in the sense of the one that takes the shortest time to complete.</p>
<p>The modelling of travel time starts by deriving a general travel speed, over both roads and terrain. The calculation of this travel speed accounts for factors such as the road quality, the type of land cover; the topographical slope acts as a speed-reducing factor while obstructions (rivers, borders, road closures) that prevent or delay travel can also be introduced.</p>
<p>This is converted to a cost or friction surface (cost in terms of the time it takes to move from one grid cell to the next) which is input to a cost-distance function that derives travel time to the target locations from the accumulation of these travel costs.</p>
<p>The underlying assumption here is that we are dealing with mixed modes of transportation. Given any arbitrary location away from a road, travel proceeds at walking speed (modulated by land cover and slope) until a road is reached, at which time travel proceeds at vehicle speed set as a function of road quality. In any case the model is trivially adapted to walking travel only by adopting suitable travel speeds.</p>
<p>The steps below will be followed:</p>
<ol type="1">
<li>Assign average speeds to roads of different class.</li>
<li>Assign a variety of walking speeds to a number of land cover units.</li>
<li>Consider National Boundaries as barrier to limit the speed.</li>
<li>Rivers are specified as an untransposable barrier to travel.</li>
<li>Calculation of overall travel speed and cost distance</li>
<li>Slope is used as a factor that increases travel time.</li>
<li>Derivation of the travel time data layer</li>
<li>Derivation of the market catchments</li>
<li>Estimating the population with poor access</li>
<li>Integrating accessibility variables into household surveys</li>
</ol>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-13.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-13.jpg" class="img-fluid"></a></p>
<p>The following are the datasets used in this study and their sources:</p>
<ol type="1">
<li>Digital Elevation Model, <a href="https://cgiarcsi.community/data/srtm-90m-digital-elevation-database-v4-1/">SRTM</a> 3 arc-second (about 90 m) resolution.</li>
<li>Road network layer from OSM, downloaded from <a href="http://download.geofabrik.de/asia/indonesia.html">Geofabrik</a></li>
<li>Hydrographic network, extracted from OSM and BIG’s RBI</li>
<li>Land Cover database extracted from Global Land Cover (<a href="http://due.esrin.esa.int/page_globcover.php">Globcover 2009</a>) at 250 m scale resolution (dataset and legend to classify classes)</li>
<li>A set of market locations, extracted from OSM and Indonesia’s Geospatial Information Agency (<a href="http://tanahair.indonesia.go.id/portal-web">BIG</a>) topographic map (RBI) database</li>
<li><a href="http://web.ornl.gov/sci/landscan/index.shtml">Landscan</a> population density dataset at 30 arc-second (about 1 km) resolution</li>
<li>National boundaries downloaded from BIG</li>
</ol>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-12.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-12.jpg" class="img-fluid"></a></p>
</section>
<section id="application" class="level4">
<h4 class="anchored" data-anchor-id="application">APPLICATION</h4>
<p>Characterizing markets catchments</p>
<ul>
<li>Area of influence of markets is delineated</li>
<li>Characterized by land cover, livelihoods, poverty, food insecurity</li>
</ul>
<p>Incorporating accessibility into analysis of household surveys</p>
<ul>
<li>Extract travel time values at HH survey sampling locations</li>
<li>Incorporate in HH survey DBs</li>
</ul>
<p>Deriving a general measure of accessibility</p>
<ul>
<li>Define threshold T of travel time for “poor access”</li>
<li>Calculate population over admin</li>
<li>Calculate population within admin*travel time &lt; T</li>
<li>(Ratio) Proportion of both</li>
</ul>
</section>
</section>
<section id="exercise" class="level2">
<h2 class="anchored" data-anchor-id="exercise">Exercise</h2>
<section id="assigning-travel-speed-to-the-road-network" class="level4">
<h4 class="anchored" data-anchor-id="assigning-travel-speed-to-the-road-network">1. ASSIGNING TRAVEL SPEED TO THE ROAD NETWORK</h4>
<p>Add a new field to the Road layer attribute table and assign a value for the average speed (m/min) of travel over each road type according to the table below:</p>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-01.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-01.jpg" class="img-fluid"></a></p>
<p>This is a crucial stage in the model: needs ADAPTATION to country context</p>
<ul>
<li>Open Attribute Table, Create New Field, call it AvgSpeed:</li>
<li>Select all fields of “primary”, set AvgSpeed to 1000</li>
</ul>
<p>Repeat for other road types, close table to save.</p>
</section>
<section id="converting-a-national-border-or-island-boundary-to-a-travel-barrier" class="level4">
<h4 class="anchored" data-anchor-id="converting-a-national-border-or-island-boundary-to-a-travel-barrier">2. CONVERTING A NATIONAL BORDER OR ISLAND BOUNDARY TO A TRAVEL BARRIER</h4>
<p>Add a new field to the Road layer attribute table</p>
<p>Confirm the file is a polygon feature, convert to a line if NOT:</p>
<ul>
<li>Properties -&gt; Source tab -&gt; Geometry Type: Polygon</li>
<li>ArcToolBox | DataManagement Tools | Features | Feature To Line</li>
</ul>
<p>Assign a speed to the border. Same procedure as for Roads, but you only need one single value. Set to 17 (17 meters/min = 1 km/h)</p>
</section>
<section id="assigning-travel-speed-to-the-river-data" class="level4">
<h4 class="anchored" data-anchor-id="assigning-travel-speed-to-the-river-data">3. ASSIGNING TRAVEL SPEED TO THE RIVER DATA</h4>
<p>Assign a travel speed to the river data using the same method</p>
<ul>
<li>Fill the new field “AvgSpeed” with the value of 0 (default fill)</li>
</ul>
<p>This implies that you cannot cross rivers, except through roads</p>
</section>
<section id="assigning-travel-speed-to-the-land-cover-data" class="level4">
<h4 class="anchored" data-anchor-id="assigning-travel-speed-to-the-land-cover-data">4. ASSIGNING TRAVEL SPEED TO THE LAND COVER DATA</h4>
<p>Classification for Land Cover classes</p>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-02.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-02.jpg" class="img-fluid"></a></p>
<p>Re-classify the land cover data into travel speeds…</p>
<ul>
<li><p>Open ArcToolBox, go to Spatial Analyst | Reclass | Reclassify.</p>
<ul>
<li>Input Raster: globcover2009</li>
<li>Reclass Field: VALUE (the pixel values)</li>
</ul></li>
<li><p>Click on Unique in order to list all values</p></li>
<li><p>Refer to the Land Cover class table: enter in the New Value column the travel speeds corresponding to the Old Values (pixel values)</p></li>
<li><p>Save the output as LandSpeed. It will be added to the Table of Contents and displayed.</p></li>
</ul>
</section>
<section id="setting-the-arcgis-environment-for-the-next-steps" class="level4">
<h4 class="anchored" data-anchor-id="setting-the-arcgis-environment-for-the-next-steps">5. SETTING THE ARCGIS ENVIRONMENT FOR THE NEXT STEPS</h4>
<p>Setting the correct pixel alignment and the correct spatial extent using DEM data raster extent:</p>
<ul>
<li>Click-right in the ArcToolBox (or click the Geoprocessing menu) and select Environments.</li>
<li>Select Processing Extent (in ArcGIS 10.x)</li>
</ul>
<p>Select an existing raster to snap the new rasters to:</p>
<ul>
<li>In the Snap Raster field, specify the Elevation raster name, idn_phy_elevation_90m_srtm.tif.</li>
</ul>
<p>To define the correct spatial extent:</p>
<ul>
<li>In the Extent field, use the explore button to browse to and select the Elevation data. Or set to Union of Inputs.</li>
</ul>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-03.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-03.jpg" class="img-fluid"></a></p>
</section>
<section id="converting-roads-rivers-and-border-layers-to-raster" class="level4">
<h4 class="anchored" data-anchor-id="converting-roads-rivers-and-border-layers-to-raster">6. CONVERTING ROADS, RIVERS, AND BORDER LAYERS TO RASTER</h4>
<p>Start with the roads layer: A field in the Attribute Table is used in the conversion to raster. The values of this field will be the pixel values. E.g. AvgSpeed for Roads</p>
<p>Spatial Analyst Tools | Convert | Features to Raster</p>
<ul>
<li>Input Features: road layer</li>
<li>Field: AvgSpeed as the field to use in the conversion</li>
<li>Output raster: RoadSpeed</li>
<li>Output cell size: 0.000833333 (should be there already) or filled with Elevation file name and location.</li>
</ul>
<p>Then proceed to the others: Rivers and Borders, and save as RiverSpeed and BorderSpeed.</p>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-04.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-04.jpg" class="img-fluid"></a></p>
</section>
<section id="merging-all-the-travel-speed-rasters-together" class="level4">
<h4 class="anchored" data-anchor-id="merging-all-the-travel-speed-rasters-together">7. MERGING ALL THE TRAVEL SPEED RASTERS TOGETHER</h4>
<p>The travel speed data for each component have to be combined into a single travel speed raster.</p>
<p>Combination of BorderSpeed, RoadSpeed, RiverSpeed and LandSpeed has to follow a precise order. Order determines is VERY important: keep to this precise order!</p>
<p>In ArcGIS 10.x, it’s done through Mosaic to New Raster.</p>
<ul>
<li>Arc Toolbox: DataManagement | Raster | Raster Dataset | Mosaic to new Raster</li>
</ul>
<p>In Mosaic to new Raster interface:</p>
<ul>
<li>Input Rasters: Drop or Add travel speed rasters in the mentioned ORDER</li>
<li>Output Location: /path/to/dir</li>
<li>Raster Name: TravelSpeed</li>
<li>Pixel Type: 16_BIT_UNSIGNED</li>
<li>Mosaic Operator: FIRST</li>
</ul>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-05.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-05.jpg" class="img-fluid"></a></p>
</section>
<section id="converting-travel-speed-to-cost-distance" class="level4">
<h4 class="anchored" data-anchor-id="converting-travel-speed-to-cost-distance">8. CONVERTING TRAVEL SPEED TO COST DISTANCE</h4>
<p>Convert travel speed to cost of travel.</p>
<p>Travel speed pixel values: speed, meters/min.</p>
<p>Travel cost pixels values: time, time to cross the pixel.</p>
<p>Calculate the inverse of the travel speed and apply a numeric factor for converting meters to degrees</p>
<p>In Raster Calculator enter the following expression:</p>
<p>111321 / “TravelSpeed“</p>
</section>
<section id="output-name-travelcost0-9.-calculating-the-slope-factor" class="level4">
<h4 class="anchored" data-anchor-id="output-name-travelcost0-9.-calculating-the-slope-factor">Output name: TravelCost0 9. CALCULATING THE SLOPE FACTOR</h4>
<p>The slope factor is derived from a Digital Elevation Model (DEM, SRTM 30 arc-second or about 1 km). This involves two stages:</p>
<ul>
<li>Deriving slope from a DEM</li>
<li>Reclassifying the slope into travel penalties or weights</li>
</ul>
<p>DERIVING SLOPE FROM DEM</p>
<p>Import the DEM (yem_dem) into your project</p>
<ul>
<li>ArcToolBox | Spatial Analyst Tools | Surface | Slope</li>
<li>Output Measurement: Percent</li>
<li>Z factor (Sumba): 0.00000912</li>
<li>Output: temp_slope</li>
</ul>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-06.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-06.jpg" class="img-fluid"></a></p>
<p>Environment Settings | Raster Analysis – select the dem raster for the Cell Size field.</p>
<p>Z factor for Sumba Island: 0.00000912</p>
<p>(The latitude in the middle of the country is about 9.7S, so we can take the value for 10, or 0.00000912)</p>
<p>RECLASSIFY SLOPE</p>
<p>Slope factor is derived from re-classification of Slope into weights that penalize the travel speed.</p>
<ul>
<li>E.g. Under slope factor of 80%, speed is 80% of flat terrain speed.</li>
<li>Output = SlopeWeight</li>
</ul>
<p>Spatial Analyst | Reclass | Reclassify</p>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-07.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-07.jpg" class="img-fluid"></a></p>
</section>
<section id="derive-final-travel-cost-layer" class="level4">
<h4 class="anchored" data-anchor-id="derive-final-travel-cost-layer">10. DERIVE FINAL TRAVEL COST LAYER</h4>
<p>Apply the slope weight through a simple expression…</p>
<ul>
<li>TravelCost = 100*TravelCost0/(SlopeWeight)</li>
</ul>
<p>This done in Spatial Analyst Tools | Map Algebra | Raster Calculator</p>
<p>This travel cost is the cost (in time) of crossing each grid cell.</p>
<p>This is the key input for the next step which will take this cost layer and derive the total cost (i.e.&nbsp;the travel time) to the nearest target location.</p>
</section>
<section id="derive-travel-time-output" class="level4">
<h4 class="anchored" data-anchor-id="derive-travel-time-output">11. DERIVE TRAVEL TIME OUTPUT</h4>
<p>Travel time is derived using the CostDistance function:</p>
<p>Spatial Analyst Tools | Distance | Cost Distance</p>
<p>Input parameters:</p>
<ul>
<li>Input Source Data: Markets (from OSM data)</li>
<li>Input Cost Raster: TravelCost</li>
<li>Output: TravelTime0</li>
</ul>
<p>Convert to integer. In RasterCalculator enter:</p>
<p>Int(TravelTime0)</p>
<p>Save As TravelTime</p>
<p>PREPARE A TRAVEL TIME MAP</p>
<p>Display Travel time with proper&nbsp;symbology&nbsp;(Classified) using values in table</p>
<p><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-08.jpg" class="img-fluid"> <img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-09.jpg" class="img-fluid"></p>
</section>
<section id="application-1-characterize-market-population" class="level4">
<h4 class="anchored" data-anchor-id="application-1-characterize-market-population">APPLICATION 1: CHARACTERIZE MARKET POPULATION</h4>
<p>Relevance: Knowing the socio-economic status of the population within a given market catchment (Cash and Vouchers)</p>
<p>Steps:</p>
<ul>
<li>Join HH Survey Locations with Market Catchment</li>
<li>Creating a new feature class (point) , e.g YemHHMkt</li>
<li>Export to Excel</li>
</ul>
<p>Following Work:</p>
<ul>
<li>Take Excel to SPSS, populating database, so that each HH is labelled with the catchment it belongs to.</li>
<li>Then aggregate over catchment - % Food Insecure, Poverty, etc,</li>
</ul>
</section>
<section id="application-2-access-in-household-food-security-analysis" class="level4">
<h4 class="anchored" data-anchor-id="application-2-access-in-household-food-security-analysis">APPLICATION 2: ACCESS IN HOUSEHOLD FOOD SECURITY ANALYSIS</h4>
<p>Relevance: Knowing how far each household is from the next market could provide additional explanatory power in analysis of Food Insecurity patterns (additional variable to account for in analysis).</p>
<p>Steps:</p>
<ul>
<li>Do an Extraction Values to Points – TravelTime (raster) to HHSurveyXY (points)</li>
<li>Output is a new feature class (point) , e.g HHMktDist</li>
<li>Export to Excel</li>
</ul>
<p>Following Work:</p>
<ul>
<li>Take Excel to SPSS, populating database, so that each HH is labelled with the distance to the nearest market.</li>
<li>Use in analysis as additional variable as relevant and required</li>
</ul>
</section>
<section id="application-3-mapping-population-with-poor-access" class="level4">
<h4 class="anchored" data-anchor-id="application-3-mapping-population-with-poor-access">APPLICATION 3: MAPPING POPULATION WITH POOR ACCESS</h4>
<p>Relevance: Knowing what proportion of a given district population is more than X hours from a market or urban centre offers a way to quantify the degree of poor accessibility. X? E.g. 4 hours.</p>
<p>Steps:</p>
<ul>
<li>TravelTime raster reclassified to mask (time &lt;= X, 1, else 0)</li>
<li>Multiply mask by Landscan</li>
<li>Total population in district through Zonal Statistics on Landscan</li>
<li>Total population in district through Zonal Statistics on masked Landscan</li>
<li>Do a ratio of the two with Raster Calculator</li>
</ul>
</section>
<section id="example" class="level4">
<h4 class="anchored" data-anchor-id="example">EXAMPLE</h4>
<p>Using additional data: sub district boundary, population density, and additional analysis to calculate market service area using Cost Allocation tool, new product could be derived.</p>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-10.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-10.jpg" class="img-fluid"></a></p>
<p>Proportion of population less than 3 hours from a market</p>
<p>At a glance quickly identify the more isolated population in Sumba</p>
<p>This was one of the key variables used to prioritise populations for multi-agency food and nutrition security interventions</p>
<p><a href="../assets/image-blog/20141216-osm-use-case-market-accessibility-11.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="../assets/image-blog/20141216-osm-use-case-market-accessibility-11.jpg" class="img-fluid"></a></p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/benny\.istan\.to\/site");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2026, Benny Istanto.</p>
<p>Exploring Climate with GIS and Data Science, solving old problems in new ways. Turning earth observation data into actionable, life-saving insights.</p>
</div>   
    <div class="nav-footer-center">
<p>Built with <a href="https://quarto.org/">Quarto</a></p>
<div class="toc-actions"><ul><li><a href="https://github.com/bennyistanto/site/blob/main/blog/20141216-osm-use-case-market-accessibility.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/bennyistanto/site/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p><a href="https://github.com/bennyistanto" aria-label="GitHub"><i class="bi bi-github"></i></a> <a href="https://linkedin.com/in/bennyistanto" aria-label="LinkedIn"><i class="bi bi-linkedin"></i></a> <a href="https://worldbank.github.io/GOST/content/staff/bennyistanto.html" aria-label="GOST"><i class="bi bi-globe"></i></a></p>
<p><a href="https://buymeacoffee.com/bennyistanto">Buy Me a Coffee</a></p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>